(this["webpackJsonpreact-mpesa-stk-example"]=this["webpackJsonpreact-mpesa-stk-example"]||[]).push([[0],{12:function(e,a,t){},13:function(e,a,t){"use strict";t.r(a);t(5);var n=t(0),s=t.n(n),r=t(3),c=t.n(r),o=t(1),l=t.n(o),u={mpesa_wrapper:"_1ClvU",inner_wrapper:"_1zETm",pay_title:"_3FpV3",button_wrapper:"_3xvUm",input:"_2IYfc",button_text:"_2ajXT",image:"_2hdkJ",success_wrapper:"_2oWJL",animatebottom:"_3wqYf",success_header:"_2_LPw",wrap:"_36Eyu",loader:"_3qqrl",spin:"_1sp4O"},i=function e(a){var t=a.credentials,r=t.title,c=t.number,o=t.shortcode,i=t.passkey,p=t.transactionType,m=t.businessShortcode,d=t.amount,f=t.callbackUrl,b=t.accountReference,v=t.transactionDesc,y=t.mpesaAuth,h=t.environment,_=a.onPaySuccess,E=void 0===_?function(){}:_,g=a.onPayError,S=void 0===g?function(){}:g,w=Object(n.useState)(c),P=w[0],N=w[1],k=Object(n.useState)(!1),x=k[0],O=k[1],j=Object(n.useState)({}),M=j[0],T=j[1],C=Object(n.useState)(!1),J=C[0],A=C[1],U=Object(n.useState)(""),q=U[0],z=U[1];return e.propTypes={credentials:l.a.object,onPaySuccess:l.a.func,onPayError:l.a.func},e.defaultProps={credentials:{},onPaySuccess:function(){},onPayError:function(){},amount:0,title:"Order payment"},Object(n.useEffect)((function(){return M.CustomerMessage&&E(M),q&&S({message:q}),function(){}}),[M,J]),s.a.createElement("div",null,M.CustomerMessage?s.a.createElement("div",{className:u.success_wrapper},s.a.createElement("div",{className:u.success_header},"Success!"),s.a.createElement("p",null,"Successful!",M.CustomerMessage)):s.a.createElement("div",{className:x?u.wrap+" "+u.mpesa_wrapper:""+u.mpesa_wrapper},s.a.createElement("div",{className:u.inner_wrapper},x&&s.a.createElement("div",{className:u.loader}),s.a.createElement("span",{className:u.pay_title},"Pay with Mpesa"),s.a.createElement("span",{className:"title"},"Payment details :",r),s.a.createElement("span",{className:u.amount},"Amount: KES ",d),s.a.createElement("span",{className:u.number},"Mpesa number: ",P),s.a.createElement("span",{className:u.number_input},s.a.createElement("input",{type:"text",placeholder:"254xxxxxxxx",className:u.input,value:P,onChange:function(e){return N(e.target.value)}})),s.a.createElement("span",{className:u.button},s.a.createElement("button",{className:u.button_wrapper,onClick:function(){try{var e={shortcode:o,passkey:i,transactionType:p,businessShortcode:m,amount:d,phoneNumber:P,callbackUrl:f,accountReference:b,transactionDesc:v,mpesaAuth:y,environment:h};return void 0!==o&&void 0!==i&&void 0!==p&&void 0!==m&&void 0!==d&&void 0!==P&&void 0!==f&&void 0!==b&&void 0!==v&&void 0!==y&&void 0!==h||(A(!0),z("Please provide all the required credentials!")),O(!0),fetch("https://mpesa-server.herokuapp.com/sendmoney",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){O(!1),e.errorMessage?(console.log(e.errorMessage),A(!0),z(e.errorMessage)):(console.log({message:"success",data:e}),T(e))})).catch((function(e){console.error("Error:",e),A(!0),z(e.message)})),Promise.resolve()}catch(a){return Promise.reject(a)}},disabled:x},s.a.createElement("span",null,"Pay Now"))))))},p=(t(12),{title:"hey",number:"254798871229",shortcode:"174379",passkey:"bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919",transactionType:"CustomerPayBillOnline",businessShortcode:"174379",amount:"3000",phone:"25498871229",callbackUrl:"https://callbackurl",accountReference:"patakenya",transactionDesc:"activation fee",mpesaAuth:"gveFzMszYVOVQGSyTHJzW7FrwFRWfrAI:QCSiYyQ0XTMLLGMd",environment:"sandbox"}),m=function(){return s.a.createElement(i,{credentials:p,onPaySuccess:function(e){console.log(e)},onPayError:function(e){console.log(e)}})};c.a.render(s.a.createElement(m,null),document.getElementById("root"))},4:function(e,a,t){e.exports=t(13)},5:function(e,a,t){}},[[4,1,2]]]);
//# sourceMappingURL=main.9ddbb4bd.chunk.js.map