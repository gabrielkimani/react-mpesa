{"version":3,"sources":["../../src/index.js","App.js","index.js"],"names":["MpesaStk","props","credentials","title","number","shortcode","passkey","transactionType","businessShortcode","amount","callbackUrl","accountReference","transactionDesc","mpesaAuth","environment","onPaySuccess","onPayError","useState","phoneNumber","setPhoneNumber","loading","setLoading","data","setData","error","setError","errorMessage","setErrorMessage","propTypes","PropTypes","object","func","defaultProps","useEffect","CustomerMessage","message","React","className","styles","success_wrapper","success_header","wrap","mpesa_wrapper","inner_wrapper","loader","pay_title","number_input","type","placeholder","input","value","onChange","e","target","button","button_wrapper","onClick","undefined","fetch","method","headers","body","JSON","stringify","then","response","json","console","log","disabled","phone","App","ReactDOM","render","document","getElementById"],"mappings":"keAKaA,EAAW,SAAXA,EAAYC,GACvB,MAaIA,EAAMC,YAZRC,EADF,EACEA,MACAC,EAFF,EAEEA,OACAC,EAHF,EAGEA,UACAC,EAJF,EAIEA,QACAC,EALF,EAKEA,gBACAC,EANF,EAMEA,kBACAC,EAPF,EAOEA,OACAC,EARF,EAQEA,YACAC,EATF,EASEA,iBACAC,EAVF,EAUEA,gBACAC,EAXF,EAWEA,UACAC,EAZF,EAYEA,YAGF,EAA0Db,EAAlDc,oBAAR,MAAuB,aAAvB,IAA0Dd,EAA1Be,kBAAhC,MAA6C,aAA7C,EAEA,EAAsCC,mBAASb,GAAxCc,EAAP,KAAoBC,EAApB,KACA,EAA8BF,oBAAS,GAAhCG,EAAP,KAAgBC,EAAhB,KACA,EAAwBJ,mBAAS,IAA1BK,EAAP,KAAaC,EAAb,KACA,EAA0BN,oBAAS,GAA5BO,EAAP,KAAcC,EAAd,KACA,EAAwCR,mBAAS,IAA1CS,EAAP,KAAqBC,EAArB,KA4EA,OA3BD3B,EAAS4B,UAAY,CAClB1B,YAAa2B,IAAUC,OACvBf,aAAcc,IAAUE,KACxBf,WAAYa,IAAUE,MAGzB/B,EAASgC,aAAe,CACrB9B,YAAa,GACba,aAAc,aACdC,WAAY,aACZP,OAAO,EACPN,MAAM,iBAGR8B,qBAAU,WAOR,OANIX,EAAKY,iBACPnB,EAAaO,GAEXI,GACFV,EAAW,CAACmB,QAAQT,IAEf,eAGN,CAACJ,EAAME,IAIRY,6BACCd,EAAKY,gBACJE,yBAAKC,UAAWC,EAAOC,iBACrBH,yBAAKC,UAAWC,EAAOE,gBAAvB,YAGAJ,yCAAed,EAAKY,kBAGtBE,yBACEC,UACGjB,EAEMkB,EAAOG,KAFd,IAEsBH,EAAOI,cAF7B,GACOJ,EAAOI,eAIhBN,yBAAKC,UAAWC,EAAOK,eACpBvB,GAAWgB,yBAAKC,UAAWC,EAAOM,SACnCR,0BAAMC,UAAWC,EAAOO,WAAxB,kBACAT,0BAAMC,UAAU,SAAhB,oBAA0ClC,GAC1CiC,0BAAMC,UAAWC,EAAO7B,QAAxB,eAA6CA,GAC7C2B,0BAAMC,UAAWC,EAAOlC,QAAxB,iBAA+Cc,GAC/CkB,0BAAMC,UAAWC,EAAOQ,cACtBV,2BACEW,KAAK,OACLC,YAAY,cACZX,UAAWC,EAAOW,MAClBC,MAAOhC,EACPiC,SAAU,SAACC,GAAD,OAAOjC,EAAeiC,EAAEC,OAAOH,WAG7Cd,0BAAMC,UAAWC,EAAOgB,QACtBlB,4BAAQC,UAAWC,EAAOiB,eAAgBC,QA1G9B,WAAH,IACjB,IAAMlC,EAAO,CACXjB,YACAC,UACAC,kBACAC,oBACAC,SACAS,cACAR,cACAC,mBACAC,kBACAC,YACAC,eAZ8B,YAcnB2C,IAAdpD,QAAuCoD,IAAZnD,QAA6CmD,IAApBlD,QAAuDkD,IAAtBjD,QAA8CiD,IAAXhD,QAAwCgD,IAAhBvC,QAA6CuC,IAAhB/C,QAAkD+C,IAArB9C,QAAsD8C,IAApB7C,QAA+C6C,IAAd5C,QAA2C4C,IAAhB3C,IACzSW,GAAS,GACTE,EAAgB,iDAGdN,GAAW,GACXqC,MAAM,+CAAgD,CACpDC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUzC,KAEpB0C,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAAC1C,GACLD,GAAW,GACPC,EAAKI,cACPyC,QAAQC,IAAI9C,EAAKI,cACjBD,GAAS,GACTE,EAAgBL,EAAKI,gBAErByC,QAAQC,IAAI,CAAEjC,QAAS,UAAWb,SAClCC,EAAQD,OAhBd,OAmBS,SAACE,GACN2C,QAAQ3C,MAAM,SAAUA,GACxBC,GAAS,GACTE,EAAgBH,EAAMW,YA1CM,kBAAf,oCA0GyDkC,SAAUjD,GAC1EgB,+CCpIRlC,G,MAAc,CAClBC,MAAO,MACPC,OAAQ,eACRC,UAAW,SACXC,QAAS,mEACTC,gBAAiB,wBACjBC,kBAAmB,SACnBC,OAAQ,OACR6D,MAAO,cACP5D,YAAa,sBACbC,iBAAkB,YAClBC,gBAAiB,iBACjBC,UAAW,oDACXC,YAAa,YAgBAyD,EAbH,WAQV,OAAO,kBAAC,EAAD,CAAWrE,YAAaA,EAC/Ba,aARsB,SAACO,GACrB6C,QAAQC,IAAI9C,IAQdN,WALoB,SAACQ,GACnB2C,QAAQC,IAAI5C,OCrBhBgD,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.9ddbb4bd.chunk.js","sourcesContent":["import React ,{useEffect,useState}from 'react'\nimport styles from './styles.module.css'\nimport PropTypes from 'prop-types'\n\n\nexport const MpesaStk = (props) => {\n  const {\n    title,\n    number,\n    shortcode,\n    passkey,\n    transactionType,\n    businessShortcode,\n    amount,\n    callbackUrl,\n    accountReference,\n    transactionDesc,\n    mpesaAuth,\n    environment,\n  } = props.credentials;\n\n  const { onPaySuccess = () =>{}, onPayError = () => {} } = props;\n\n  const [phoneNumber, setPhoneNumber] = useState(number)\n  const [loading, setLoading] = useState(false)\n  const [data, setData] = useState({})\n  const [error, setError] = useState(false)\n  const [errorMessage, setErrorMessage] = useState('');\n\n  //submit the info\n  const submitHandler = async () => {\n    const data = {\n      shortcode,\n      passkey,\n      transactionType,\n      businessShortcode,\n      amount,\n      phoneNumber,\n      callbackUrl,\n      accountReference,\n      transactionDesc,\n      mpesaAuth,\n      environment\n    }\nif(shortcode === undefined || passkey === undefined || transactionType === undefined || businessShortcode === undefined || amount === undefined || phoneNumber === undefined || callbackUrl === undefined || accountReference === undefined || transactionDesc === undefined || mpesaAuth === undefined || environment === undefined){\n  setError(true)\n  setErrorMessage('Please provide all the required credentials!');\n}\n\n    setLoading(true);\n    fetch('https://mpesa-server.herokuapp.com/sendmoney', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        setLoading(false)\n        if (data.errorMessage) {\n          console.log(data.errorMessage)\n          setError(true)\n          setErrorMessage(data.errorMessage)\n        } else {\n          console.log({ message: 'success', data })\n          setData(data)\n        }\n      })\n      .catch((error) => {\n        console.error('Error:', error)\n        setError(true)\n        setErrorMessage(error.message)\n      })\n  }\n\n MpesaStk.propTypes = {\n    credentials: PropTypes.object,\n    onPaySuccess: PropTypes.func,\n    onPayError: PropTypes.func\n  }\n  \n MpesaStk.defaultProps = {\n    credentials: {},\n    onPaySuccess: () => {},\n    onPayError: () => {},\n    amount:0,\n    title:'Order payment',\n  }\n\n  useEffect(() => {\n    if (data.CustomerMessage) {\n      onPaySuccess(data)\n    }\n    if (errorMessage) {\n      onPayError({message:errorMessage})\n    }\n    return () => {\n      \n    }\n  }, [data, error])\n\n\n  return (\n    <div>\n    {data.CustomerMessage ? (\n      <div className={styles.success_wrapper}>\n        <div className={styles.success_header}>\n          Success!\n        </div>\n        <p>Successful!{data.CustomerMessage}</p>\n      </div>\n    ) : (\n      <div\n        className={\n          !loading\n            ? `${styles.mpesa_wrapper}`\n            : `${styles.wrap} ${styles.mpesa_wrapper}`\n        }\n      >\n        <div className={styles.inner_wrapper}>\n          {loading && <div className={styles.loader}></div>}\n          <span className={styles.pay_title}>Pay with Mpesa</span>\n          <span className='title'>Payment details :{title}</span>\n          <span className={styles.amount}>Amount: KES {amount}</span>\n          <span className={styles.number}>Mpesa number: {phoneNumber}</span>\n          <span className={styles.number_input}>\n            <input\n              type='text'\n              placeholder='254xxxxxxxx'\n              className={styles.input}\n              value={phoneNumber}\n              onChange={(e) => setPhoneNumber(e.target.value)}\n            />\n          </span>\n          <span className={styles.button}>\n            <button className={styles.button_wrapper} onClick={submitHandler} disabled={loading}>\n              <span>Pay Now</span>\n            </button>\n          </span>\n        </div>\n      </div>\n    )}\n  </div>\n  )\n}\n","import React from 'react'\n\nimport { MpesaStk } from 'react-mpesa-stk'\nimport 'react-mpesa-stk/dist/index.css'\n\nconst credentials = {\n  title: 'hey',\n  number: '254798871229',\n  shortcode: '174379',\n  passkey: 'bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919',\n  transactionType: 'CustomerPayBillOnline',\n  businessShortcode: '174379',\n  amount: '3000',\n  phone: '25498871229',\n  callbackUrl: 'https://callbackurl',\n  accountReference: 'patakenya',\n  transactionDesc: 'activation fee',\n  mpesaAuth: 'gveFzMszYVOVQGSyTHJzW7FrwFRWfrAI:QCSiYyQ0XTMLLGMd',\n  environment: 'sandbox'\n}\n\nconst App = () => {\n  const onSendSuccess = (data) => {\n    console.log(data)\n  }\n\n  const handleError = (error) => {\n    console.log(error)\n  }\n  return <MpesaStk  credentials={credentials}\n  onPaySuccess={onSendSuccess}\n  onPayError={handleError}/>\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}